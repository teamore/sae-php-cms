{% extends "base.html" %}
{% block script %}
    <script>
        async function sendPostLikeRequest(id, method = "PUT") {
            console.log("send like request for post #id "+id);
            fetch('/posts/'+id+'/like', {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then((response)=>{
                window.location = window.location.href;
            });
        }
    </script>
{% endblock %}

{% block title %}{{result.title}}{% endblock %}
{% block content %}
    <table>
        {% for key, value in result %}
            <tr>
                <td>{{key}}</td>
                <td>{{value}}</td>
            </tr>
        {% endfor %}
    </table>
    <div>
        {% if result.ilike %}
        <button onclick="sendPostLikeRequest({{result.id}}, 'DELETE');">unlike</button>
        {% else %}
            <button onclick="sendPostLikeRequest({{result.id}}, 'PUT');">like</button>
        {% endif %}
    </div>
{% endblock %}
