{% extends "base.html" %}
{% block script %}
    <script>
        async function sendPostLikeRequest(id) {
            console.log("send like request for post #id "+id);
            fetch('/', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({model: 'PostLike', post_id: id})
            }).then((response)=>{
                console.log(response);
            });
        }
    </script>
{% endblock %}

{% block title %}{{result.title}}{% endblock %}
{% block content %}
    <table>
        {% for key, value in result %}
            <tr>
                <td>{{key}}</td>
                <td>{{value}}</td>
            </tr>
        {% endfor %}
    </table>
    <div>
        {% if result.ilike %}
            <a href="?post_unlike={{result.id}}">dislike</a>
        {% else %}
            <a href="?post_like={{result.id}}">like</a>
            <button onclick="sendPostLikeRequest({{result.id}});">like</button>
        {% endif %}
    </div>
{% endblock %}
